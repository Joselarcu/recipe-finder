import{a as k}from"./chunk-AFGL3DTB.js";import{b as A,d as Q,f as F,q as L}from"./chunk-CECG5YD3.js";import{a as W}from"./chunk-O6GSRLFD.js";import{$ as T,Aa as j,B as n,D as C,E as x,I as f,K as a,N as R,O as b,P as o,Q as r,R as y,S as I,T as w,U as d,W as M,X as p,Z as E,aa as O,ba as D,c as h,d as u,ha as P,i as v,j as _,k as S,pa as N,ra as V,s as m,t as g}from"./chunk-AIU7P5UL.js";var U=(i,e)=>e.id;function z(i,e){if(i&1&&(o(0,"div",9),p(1),r()),i&2){let t=d();n(),E(" ",t.error," ")}}function G(i,e){i&1&&(o(0,"div",10),p(1," Searching for recipes... "),r())}function J(i,e){if(i&1&&(o(0,"div",12),y(1,"app-recipe-card",13),r()),i&2){let t=e.$implicit;n(),a("recipe",t)}}function K(i,e){if(i&1&&(o(0,"div",11),R(1,J,2,1,"div",12,U),r()),i&2){let t=d();n(),b(t.recipes)}}function X(i,e){i&1&&(o(0,"div",15),p(1," No recipes found with this criteria. "),r())}function Y(i,e){if(i&1&&f(0,X,2,0,"div",14),i&2){let t=d();a("ngIf",!t.loading)}}var B=class i{constructor(e){this.recipeService=e}searchQuery="";recipes=[];loading=!1;error="";searchSubject=new u;subscription=new h;ngOnInit(){this.setupSearch(),this.searchAllRecipes()}setupSearch(){this.subscription.add(this.searchSubject.pipe(v(300),_(),S(e=>e?this.recipeService.searchRecipes(e.toLowerCase().split(" ")):this.recipeService.getAllRecipes())).subscribe({next:e=>{this.recipes=e,this.loading=!1},error:e=>{this.error="Error searching for recipes. Please try again: "+e,this.loading=!1}}))}searchAllRecipes(){this.loading=!0,this.error="",this.recipes=[],this.subscription.add(this.recipeService.getAllRecipes().subscribe({next:e=>{this.recipes=e,this.loading=!1},error:e=>{this.error="Error searching for recipes. Please try again, "+e,this.loading=!1}}))}searchRecipes(e){let t=e.target;this.loading=!0,this.searchSubject.next(t.value)}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(C(W))};static \u0275cmp=x({type:i,selectors:[["app-recipe-search"]],decls:11,vars:5,consts:[["noRecipes",""],[1,"container","pt-4"],[1,"text-center","pb-4"],[1,"d-flex","gap-4","mb-4"],[1,"input-group"],["type","text","placeholder","Search for recipes...",1,"form-control",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],["class","loading",4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"error-message"],[1,"loading"],[1,"row"],[1,"col","col-sm-12","col-md-6","col-lg-4","mb-4"],[3,"recipe"],["class","alert alert-info",4,"ngIf"],[1,"alert","alert-info"]],template:function(t,c){if(t&1){let l=I();o(0,"div",1)(1,"h1",2),p(2,"Search Recipes"),r(),o(3,"div",3)(4,"div",4)(5,"input",5),D("ngModelChange",function(s){return m(l),O(c.searchQuery,s)||(c.searchQuery=s),g(s)}),w("input",function(s){return m(l),g(c.searchRecipes(s))}),r()()(),f(6,z,2,1,"div",6)(7,G,2,0,"div",7)(8,K,3,0,"div",8)(9,Y,1,1,"ng-template",null,0,P),r()}if(t&2){let l=M(10);n(5),T("ngModel",c.searchQuery),n(),a("ngIf",c.error),n(),a("ngIf",c.loading),n(),a("ngIf",c.recipes.length>0)("ngIfElse",l)}},dependencies:[V,N,L,A,Q,F,j,k],styles:[".search-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.error-message[_ngcontent-%COMP%]{color:#f44336;padding:10px;margin:10px 0;border-radius:4px;background-color:#ffebee}.loading[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}"]})};export{B as RecipeSearchComponent};
