import{a as D,b as O,c as f,d as U,e as B,g as Q,h as H,i as L,j as Y,k as $,l as z,m as J,n as K,o as W,p as X,r as Z}from"./chunk-CECG5YD3.js";import{a as ee}from"./chunk-O6GSRLFD.js";import{B as o,Ba as P,D as _,E as q,I as s,K as m,L as v,P as i,Q as t,R as u,S as k,T as F,U as R,X as r,Z as j,a as A,la as C,ma as E,oa as M,pa as G,ra as V,s as x,t as N,v as T,wa as w,y as I}from"./chunk-AIU7P5UL.js";function ie(n,l){if(n&1&&(i(0,"div",35),r(1),t()),n&2){let a=R();o(),j(" ",a.error()," ")}}function ne(n,l){n&1&&(i(0,"div",36),r(1," Recipe added successfully! Redirecting... "),t())}function re(n,l){n&1&&(i(0,"div",37),r(1," Title is required "),t())}function le(n,l){n&1&&(i(0,"div",37),r(1," Please enter a valid number of minutes "),t())}function oe(n,l){n&1&&(i(0,"div",37),r(1," Difficulty is required "),t())}function ae(n,l){n&1&&(i(0,"div",37),r(1," Name is required "),t())}function de(n,l){n&1&&(i(0,"div",37),r(1," Quantity is required "),t())}function me(n,l){if(n&1){let a=k();i(0,"div",38)(1,"div",39),u(2,"input",40),s(3,ae,2,0,"div",10),t(),i(4,"div",41),u(5,"input",42),s(6,de,2,0,"div",10),t(),i(7,"div",41),u(8,"input",43),t(),i(9,"div",44)(10,"button",45),F("click",function(){let d=x(a).index,p=R();return N(p.removeIngredient(d))}),r(11,"Remove"),t()()()}if(n&2){let a,e,d,p,c=l.$implicit,g=l.index;m("formGroupName",g),o(2),v("is-invalid",((a=c.get("name"))==null?null:a.invalid)&&((a=c.get("name"))==null?null:a.touched)),o(),m("ngIf",((e=c.get("name"))==null?null:e.invalid)&&((e=c.get("name"))==null?null:e.touched)),o(2),v("is-invalid",((d=c.get("quantity"))==null?null:d.invalid)&&((d=c.get("quantity"))==null?null:d.touched)),o(),m("ngIf",((p=c.get("quantity"))==null?null:p.invalid)&&((p=c.get("quantity"))==null?null:p.touched))}}function ce(n,l){n&1&&(i(0,"div",37),r(1," Instructions are required "),t())}function pe(n,l){n&1&&(i(0,"span"),r(1,"Add Recipe"),t())}function se(n,l){n&1&&(i(0,"span"),u(1,"span",46),r(2," Adding Recipe... "),t())}var te=class n{constructor(l,a,e,d){this.fb=l;this.recipeService=a;this.router=e;this.injector=d,this.recipeForm=this.fb.group({title:["",f.required],readyInMinutes:[0,[f.required,f.min(0)]],ingredients:this.fb.array([]),instructions:["",f.required],difficulty:["",f.required],imageUrl:[""],favorite:[!1]}),this.addIngredient(),E(()=>{this.recipeForm.valid&&this.errorSignal.set("")})}recipeForm;errorSignal=I("");error=C(()=>this.errorSignal());loadingSignal=I(!1);loading=C(()=>this.loadingSignal());successSignal=I(!1);success=C(()=>this.successSignal());injector;get ingredients(){return this.recipeForm.get("ingredients")}addIngredient(){let l=this.fb.group({name:["",f.required],quantity:["",f.required],unit:[""]});this.ingredients.push(l)}removeIngredient(l){this.ingredients.length>1&&this.ingredients.removeAt(l)}addRecipe(){if(this.recipeForm.valid){this.loadingSignal.set(!0),this.errorSignal.set(""),this.successSignal.set(!1);let l=A({},this.recipeForm.value),a=P(this.recipeService.addRecipe(l),{initialValue:null,injector:this.injector});E(()=>{a()&&(this.successSignal.set(!0),this.loadingSignal.set(!1),setTimeout(()=>{this.router.navigate(["/recipes"])},1500))},{injector:this.injector})}else this.errorSignal.set("Please fill in all required fields."),Object.keys(this.recipeForm.controls).forEach(l=>{let a=this.recipeForm.get(l);a?.invalid&&a.markAsTouched()})}static \u0275fac=function(a){return new(a||n)(_(X),_(ee),_(w),_(T))};static \u0275cmp=q({type:n,selectors:[["app-add-recipe"]],decls:58,vars:19,consts:[[1,"container","mt-4"],[1,"text-center","mb-4"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"card","mb-4"],[1,"card-body"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","readyInMinutes",1,"form-label"],["type","number","id","readyInMinutes","formControlName","readyInMinutes",1,"form-control"],["for","difficulty",1,"form-label"],["id","difficulty","formControlName","difficulty",1,"form-select"],["value",""],["value","easy"],["value","medium"],["value","hard"],["for","imageUrl",1,"form-label"],["type","text","id","imageUrl","formControlName","imageUrl",1,"form-control"],[1,"form-check"],["type","checkbox","id","favorite","formControlName","favorite",1,"form-check-input"],["for","favorite",1,"form-check-label"],[1,"mb-4"],[1,"mb-2"],["formArrayName","ingredients"],["class","row mb-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],["for","instructions",1,"form-label"],["id","instructions","formControlName","instructions","rows","10",1,"form-control"],[1,"form-text"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"invalid-feedback"],[1,"row","mb-3",3,"formGroupName"],[1,"col-md-4"],["type","text","formControlName","name","placeholder","Ingredient name",1,"form-control"],[1,"col-md-3"],["type","text","formControlName","quantity","placeholder","Quantity",1,"form-control"],["type","text","formControlName","unit","placeholder","Unit",1,"form-control"],[1,"col-md-2"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,e){if(a&1&&(i(0,"div",0)(1,"h1",1),r(2,"Add New Recipe"),t(),s(3,ie,2,1,"div",2)(4,ne,2,0,"div",3),i(5,"form",4),F("ngSubmit",function(){return e.addRecipe()}),i(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),r(10,"Recipe Title"),t(),u(11,"input",9),s(12,re,2,0,"div",10),t(),i(13,"div",7)(14,"label",11),r(15,"Ready in (minutes)"),t(),u(16,"input",12),s(17,le,2,0,"div",10),t(),i(18,"div",7)(19,"label",13),r(20,"Difficulty"),t(),i(21,"select",14)(22,"option",15),r(23,"Select difficulty"),t(),i(24,"option",16),r(25,"Easy"),t(),i(26,"option",17),r(27,"Medium"),t(),i(28,"option",18),r(29,"Hard"),t()(),s(30,oe,2,0,"div",10),t(),i(31,"div",7)(32,"label",19),r(33,"Image URL"),t(),u(34,"input",20),t(),i(35,"div",7)(36,"div",21),u(37,"input",22),i(38,"label",23),r(39,"Mark as favorite"),t()()(),i(40,"div",24)(41,"h5",25),r(42,"Ingredients"),t(),i(43,"div",26),s(44,me,12,7,"div",27),i(45,"button",28),F("click",function(){return e.addIngredient()}),r(46,"Add Ingredient"),t()()(),i(47,"div",7)(48,"label",29),r(49,"Instructions"),t(),u(50,"textarea",30),s(51,ce,2,0,"div",10),i(52,"div",31),r(53,"You can add html code to make the instructions more readable."),t()()()(),i(54,"div",32)(55,"button",33),s(56,pe,2,0,"span",34)(57,se,3,0,"span",34),t()()()()),a&2){let d,p,c,g,y,b,S,h;o(3),m("ngIf",e.error()),o(),m("ngIf",e.success()),o(),m("formGroup",e.recipeForm),o(6),v("is-invalid",((d=e.recipeForm.get("title"))==null?null:d.invalid)&&((d=e.recipeForm.get("title"))==null?null:d.touched)),o(),m("ngIf",((p=e.recipeForm.get("title"))==null?null:p.invalid)&&((p=e.recipeForm.get("title"))==null?null:p.touched)),o(4),v("is-invalid",((c=e.recipeForm.get("readyInMinutes"))==null?null:c.invalid)&&((c=e.recipeForm.get("readyInMinutes"))==null?null:c.touched)),o(),m("ngIf",((g=e.recipeForm.get("readyInMinutes"))==null?null:g.invalid)&&((g=e.recipeForm.get("readyInMinutes"))==null?null:g.touched)),o(4),v("is-invalid",((y=e.recipeForm.get("difficulty"))==null?null:y.invalid)&&((y=e.recipeForm.get("difficulty"))==null?null:y.touched)),o(9),m("ngIf",((b=e.recipeForm.get("difficulty"))==null?null:b.invalid)&&((b=e.recipeForm.get("difficulty"))==null?null:b.touched)),o(14),m("ngForOf",e.ingredients.controls),o(6),v("is-invalid",((S=e.recipeForm.get("instructions"))==null?null:S.invalid)&&((S=e.recipeForm.get("instructions"))==null?null:S.touched)),o(),m("ngIf",((h=e.recipeForm.get("instructions"))==null?null:h.invalid)&&((h=e.recipeForm.get("instructions"))==null?null:h.touched)),o(4),m("disabled",!e.recipeForm.valid||e.loading()),o(),m("ngIf",!e.loading()),o(),m("ngIf",e.loading())}},dependencies:[V,M,G,Z,Q,K,W,O,H,D,J,U,B,L,z,Y,$],encapsulation:2})};export{te as AddRecipeComponent};
