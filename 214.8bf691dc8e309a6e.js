"use strict";(self.webpackChunkrecipe_finder=self.webpackChunkrecipe_finder||[]).push([[214],{8214:(P,h,s)=>{s.r(h),s.d(h,{RecipeSearchComponent:()=>O});var u=s(8834),d=s(4341),v=s(5528),S=s(7364),R=s(1413),C=s(8359),x=s(3236),f=s(9974),g=s(4360),I=s(3669);function T(n,r){return n===r}var E=s(5558),e=s(9498),F=s(4964);const b=(n,r)=>r.id;function M(n,r){if(1&n&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.SpI(" ",i.error," ")}}function D(n,r){1&n&&(e.j41(0,"div",10),e.EFF(1," Searching for recipes... "),e.k0s())}function G(n,r){if(1&n&&(e.j41(0,"div",12),e.nrm(1,"app-recipe-card",13),e.k0s()),2&n){const i=r.$implicit;e.R7$(),e.Y8G("recipe",i)}}function N(n,r){if(1&n&&(e.j41(0,"div",11),e.Z7z(1,G,2,1,"div",12,b),e.k0s()),2&n){const i=e.XpG();e.R7$(),e.Dyx(i.recipes)}}function Y(n,r){1&n&&(e.j41(0,"div",15),e.EFF(1," No recipes found with this criteria. "),e.k0s())}function $(n,r){if(1&n&&e.DNE(0,Y,2,0,"div",14),2&n){const i=e.XpG();e.Y8G("ngIf",!i.loading)}}let O=(()=>{class n{recipeService;searchQuery="";recipes=[];loading=!1;error="";searchSubject=new R.B;subscription=new C.yU;constructor(i){this.recipeService=i}ngOnInit(){this.setupSearch(),this.searchAllRecipes()}setupSearch(){this.subscription.add(this.searchSubject.pipe(function y(n,r=x.E){return(0,f.N)((i,c)=>{let t=null,o=null,l=null;const a=()=>{if(t){t.unsubscribe(),t=null;const p=o;o=null,c.next(p)}};function B(){const p=l+n,m=r.now();if(m<p)return t=this.schedule(void 0,p-m),void c.add(t);a()}i.subscribe((0,g._)(c,p=>{o=p,l=r.now(),t||(t=r.schedule(B,n),c.add(t))},()=>{a(),c.complete()},void 0,()=>{o=t=null}))})}(300),function j(n,r=I.D){return n=n??T,(0,f.N)((i,c)=>{let t,o=!0;i.subscribe((0,g._)(c,l=>{const a=r(l);(o||!n(t,a))&&(o=!1,t=a,c.next(l))}))})}(),(0,E.n)(i=>i?this.recipeService.searchRecipes(i.toLowerCase().split(" ")):this.recipeService.getAllRecipes())).subscribe({next:i=>{this.recipes=i,this.loading=!1},error:i=>{this.error="Error searching for recipes. Please try again: "+i,this.loading=!1}}))}searchAllRecipes(){this.loading=!0,this.error="",this.recipes=[],this.subscription.add(this.recipeService.getAllRecipes().subscribe({next:i=>{this.recipes=i,this.loading=!1},error:i=>{this.error="Error searching for recipes. Please try again, "+i,this.loading=!1}}))}searchRecipes(i){const c=i.target;this.loading=!0,this.searchSubject.next(c.value)}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(c){return new(c||n)(e.rXU(F.S))};static \u0275cmp=e.VBU({type:n,selectors:[["app-recipe-search"]],decls:11,vars:5,consts:[["noRecipes",""],[1,"container","pt-4"],[1,"text-center","pb-4"],[1,"d-flex","gap-4","mb-4"],[1,"input-group"],["type","text","placeholder","Search for recipes...",1,"form-control",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],["class","loading",4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"error-message"],[1,"loading"],[1,"row"],[1,"col","col-sm-12","col-md-6","col-lg-4","mb-4"],[3,"recipe"],["class","alert alert-info",4,"ngIf"],[1,"alert","alert-info"]],template:function(c,t){if(1&c){const o=e.RV6();e.j41(0,"div",1)(1,"h1",2),e.EFF(2,"Search Recipes"),e.k0s(),e.j41(3,"div",3)(4,"div",4)(5,"input",5),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.searchQuery,a)||(t.searchQuery=a),e.Njj(a)}),e.bIt("input",function(a){return e.eBV(o),e.Njj(t.searchRecipes(a))}),e.k0s()()(),e.DNE(6,M,2,1,"div",6)(7,D,2,0,"div",7)(8,N,3,0,"div",8)(9,$,1,1,"ng-template",null,0,e.C5r),e.k0s()}if(2&c){const o=e.sdS(10);e.R7$(5),e.R50("ngModel",t.searchQuery),e.R7$(),e.Y8G("ngIf",t.error),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.recipes.length>0)("ngIfElse",o)}},dependencies:[u.D,u.I,d.YN,d.me,d.BC,d.vS,v.m,S.S],styles:[".search-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.error-message[_ngcontent-%COMP%]{color:#f44336;padding:10px;margin:10px 0;border-radius:4px;background-color:#ffebee}.loading[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}"]})}return n})()}}]);