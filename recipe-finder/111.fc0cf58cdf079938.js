"use strict";(self.webpackChunkrecipe_finder=self.webpackChunkrecipe_finder||[]).push([[111],{5111:(M,v,a)=>{a.r(v),a.d(v,{AddRecipeComponent:()=>S});var e=a(1360),_=a(8434),n=a(4341),F=a(9079),h=a(4964),E=a(7430);function R(t,s){if(1&t&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.SpI(" ",r.error()," ")}}function b(t,s){1&t&&(e.j41(0,"div",36),e.EFF(1," Recipe added successfully! Redirecting... "),e.k0s())}function k(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Title is required "),e.k0s())}function y(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Please enter a valid number of minutes "),e.k0s())}function I(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Difficulty is required "),e.k0s())}function j(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Name is required "),e.k0s())}function A(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Quantity is required "),e.k0s())}function C(t,s){if(1&t){const r=e.RV6();e.j41(0,"div",38)(1,"div",39),e.nrm(2,"input",40),e.DNE(3,j,2,0,"div",10),e.k0s(),e.j41(4,"div",41),e.nrm(5,"input",42),e.DNE(6,A,2,0,"div",10),e.k0s(),e.j41(7,"div",41),e.nrm(8,"input",43),e.k0s(),e.j41(9,"div",44)(10,"button",45),e.bIt("click",function(){const i=e.eBV(r).index,o=e.XpG();return e.Njj(o.removeIngredient(i))}),e.EFF(11,"Remove"),e.k0s()()()}if(2&t){let r,l,i,o;const d=s.$implicit;e.Y8G("formGroupName",s.index),e.R7$(2),e.AVh("is-invalid",(null==(r=d.get("name"))?null:r.invalid)&&(null==(r=d.get("name"))?null:r.touched)),e.R7$(),e.Y8G("ngIf",(null==(l=d.get("name"))?null:l.invalid)&&(null==(l=d.get("name"))?null:l.touched)),e.R7$(2),e.AVh("is-invalid",(null==(i=d.get("quantity"))?null:i.invalid)&&(null==(i=d.get("quantity"))?null:i.touched)),e.R7$(),e.Y8G("ngIf",(null==(o=d.get("quantity"))?null:o.invalid)&&(null==(o=d.get("quantity"))?null:o.touched))}}function T(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Instructions are required "),e.k0s())}function D(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Add Recipe"),e.k0s())}function N(t,s){1&t&&(e.j41(0,"span"),e.nrm(1,"span",46),e.EFF(2," Adding Recipe... "),e.k0s())}let S=(()=>{class t{fb;recipeService;router;recipeForm;errorSignal=(0,e.vPA)("");error=(0,e.EWP)(()=>this.errorSignal());loadingSignal=(0,e.vPA)(!1);loading=(0,e.EWP)(()=>this.loadingSignal());successSignal=(0,e.vPA)(!1);success=(0,e.EWP)(()=>this.successSignal());injector;constructor(r,l,i,o){this.fb=r,this.recipeService=l,this.router=i,this.injector=o,this.recipeForm=this.fb.group({title:["",n.k0.required],readyInMinutes:[0,[n.k0.required,n.k0.min(0)]],ingredients:this.fb.array([]),instructions:["",n.k0.required],difficulty:["",n.k0.required],imageUrl:[""],favorite:[!1]}),this.addIngredient(),(0,e.QZP)(()=>{this.recipeForm.valid&&this.errorSignal.set("")})}get ingredients(){return this.recipeForm.get("ingredients")}addIngredient(){const r=this.fb.group({name:["",n.k0.required],quantity:["",n.k0.required],unit:[""]});this.ingredients.push(r)}removeIngredient(r){this.ingredients.length>1&&this.ingredients.removeAt(r)}addRecipe(){if(this.recipeForm.valid){this.loadingSignal.set(!0),this.errorSignal.set(""),this.successSignal.set(!1);const r={...this.recipeForm.value},l=(0,F.ot)(this.recipeService.addRecipe(r),{initialValue:null,injector:this.injector});(0,e.QZP)(()=>{l()&&(this.successSignal.set(!0),this.loadingSignal.set(!1),setTimeout(()=>{this.router.navigate(["/recipes"])},1500))},{injector:this.injector})}else this.errorSignal.set("Please fill in all required fields."),Object.keys(this.recipeForm.controls).forEach(r=>{const l=this.recipeForm.get(r);l?.invalid&&l.markAsTouched()})}static \u0275fac=function(l){return new(l||t)(e.rXU(n.ok),e.rXU(h.S),e.rXU(E.Ix),e.rXU(e.zZn))};static \u0275cmp=e.VBU({type:t,selectors:[["app-add-recipe"]],decls:58,vars:19,consts:[[1,"container","mt-4"],[1,"text-center","mb-4"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"card","mb-4"],[1,"card-body"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","readyInMinutes",1,"form-label"],["type","number","id","readyInMinutes","formControlName","readyInMinutes",1,"form-control"],["for","difficulty",1,"form-label"],["id","difficulty","formControlName","difficulty",1,"form-select"],["value",""],["value","easy"],["value","medium"],["value","hard"],["for","imageUrl",1,"form-label"],["type","text","id","imageUrl","formControlName","imageUrl",1,"form-control"],[1,"form-check"],["type","checkbox","id","favorite","formControlName","favorite",1,"form-check-input"],["for","favorite",1,"form-check-label"],[1,"mb-4"],[1,"mb-2"],["formArrayName","ingredients"],["class","row mb-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],["for","instructions",1,"form-label"],["id","instructions","formControlName","instructions","rows","10",1,"form-control"],[1,"form-text"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[4,"ngIf"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"],[1,"invalid-feedback"],[1,"row","mb-3",3,"formGroupName"],[1,"col-md-4"],["type","text","formControlName","name","placeholder","Ingredient name",1,"form-control"],[1,"col-md-3"],["type","text","formControlName","quantity","placeholder","Quantity",1,"form-control"],["type","text","formControlName","unit","placeholder","Unit",1,"form-control"],[1,"col-md-2"],["type","button",1,"btn","btn-danger","w-100",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(l,i){if(1&l&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Add New Recipe"),e.k0s(),e.DNE(3,R,2,1,"div",2)(4,b,2,0,"div",3),e.j41(5,"form",4),e.bIt("ngSubmit",function(){return i.addRecipe()}),e.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),e.EFF(10,"Recipe Title"),e.k0s(),e.nrm(11,"input",9),e.DNE(12,k,2,0,"div",10),e.k0s(),e.j41(13,"div",7)(14,"label",11),e.EFF(15,"Ready in (minutes)"),e.k0s(),e.nrm(16,"input",12),e.DNE(17,y,2,0,"div",10),e.k0s(),e.j41(18,"div",7)(19,"label",13),e.EFF(20,"Difficulty"),e.k0s(),e.j41(21,"select",14)(22,"option",15),e.EFF(23,"Select difficulty"),e.k0s(),e.j41(24,"option",16),e.EFF(25,"Easy"),e.k0s(),e.j41(26,"option",17),e.EFF(27,"Medium"),e.k0s(),e.j41(28,"option",18),e.EFF(29,"Hard"),e.k0s()(),e.DNE(30,I,2,0,"div",10),e.k0s(),e.j41(31,"div",7)(32,"label",19),e.EFF(33,"Image URL"),e.k0s(),e.nrm(34,"input",20),e.k0s(),e.j41(35,"div",7)(36,"div",21),e.nrm(37,"input",22),e.j41(38,"label",23),e.EFF(39,"Mark as favorite"),e.k0s()()(),e.j41(40,"div",24)(41,"h5",25),e.EFF(42,"Ingredients"),e.k0s(),e.j41(43,"div",26),e.DNE(44,C,12,7,"div",27),e.j41(45,"button",28),e.bIt("click",function(){return i.addIngredient()}),e.EFF(46,"Add Ingredient"),e.k0s()()(),e.j41(47,"div",7)(48,"label",29),e.EFF(49,"Instructions"),e.k0s(),e.nrm(50,"textarea",30),e.DNE(51,T,2,0,"div",10),e.j41(52,"div",31),e.EFF(53,"You can add html code to make the instructions more readable."),e.k0s()()()(),e.j41(54,"div",32)(55,"button",33),e.DNE(56,D,2,0,"span",34)(57,N,3,0,"span",34),e.k0s()()()()),2&l){let o,d,c,u,m,p,f,g;e.R7$(3),e.Y8G("ngIf",i.error()),e.R7$(),e.Y8G("ngIf",i.success()),e.R7$(),e.Y8G("formGroup",i.recipeForm),e.R7$(6),e.AVh("is-invalid",(null==(o=i.recipeForm.get("title"))?null:o.invalid)&&(null==(o=i.recipeForm.get("title"))?null:o.touched)),e.R7$(),e.Y8G("ngIf",(null==(d=i.recipeForm.get("title"))?null:d.invalid)&&(null==(d=i.recipeForm.get("title"))?null:d.touched)),e.R7$(4),e.AVh("is-invalid",(null==(c=i.recipeForm.get("readyInMinutes"))?null:c.invalid)&&(null==(c=i.recipeForm.get("readyInMinutes"))?null:c.touched)),e.R7$(),e.Y8G("ngIf",(null==(u=i.recipeForm.get("readyInMinutes"))?null:u.invalid)&&(null==(u=i.recipeForm.get("readyInMinutes"))?null:u.touched)),e.R7$(4),e.AVh("is-invalid",(null==(m=i.recipeForm.get("difficulty"))?null:m.invalid)&&(null==(m=i.recipeForm.get("difficulty"))?null:m.touched)),e.R7$(9),e.Y8G("ngIf",(null==(p=i.recipeForm.get("difficulty"))?null:p.invalid)&&(null==(p=i.recipeForm.get("difficulty"))?null:p.touched)),e.R7$(14),e.Y8G("ngForOf",i.ingredients.controls),e.R7$(6),e.AVh("is-invalid",(null==(f=i.recipeForm.get("instructions"))?null:f.invalid)&&(null==(f=i.recipeForm.get("instructions"))?null:f.touched)),e.R7$(),e.Y8G("ngIf",(null==(g=i.recipeForm.get("instructions"))?null:g.invalid)&&(null==(g=i.recipeForm.get("instructions"))?null:g.touched)),e.R7$(4),e.Y8G("disabled",!i.recipeForm.valid||i.loading()),e.R7$(),e.Y8G("ngIf",!i.loading()),e.R7$(),e.Y8G("ngIf",i.loading())}},dependencies:[_.MD,_.Sq,_.bT,n.X1,n.qT,n.xH,n.y7,n.me,n.Q0,n.Zm,n.wz,n.BC,n.cb,n.j4,n.JD,n.$R,n.v8],encapsulation:2})}return t})()}}]);