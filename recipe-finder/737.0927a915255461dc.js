"use strict";(self.webpackChunkrecipe_finder=self.webpackChunkrecipe_finder||[]).push([[737],{737:(h,g,r)=>{r.r(g),r.d(g,{RecipeDetailComponent:()=>_});var e=r(1360),s=r(8434),E=r(33),f=r(9079),u=r(8359),m=r(7430),p=r(4964);function M(n,a){1&n&&(e.j41(0,"div",1),e.EFF(1," Loading recipe details... "),e.k0s())}function i(n,a){if(1&n&&(e.j41(0,"div",2),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.error()," ")}}function o(n,a){if(1&n&&(e.j41(0,"li",19),e.EFF(1),e.nI1(2,"titlecase"),e.nI1(3,"titlecase"),e.nI1(4,"titlecase"),e.k0s()),2&n){const t=a.$implicit;e.R7$(),e.E5c(" ",e.bMT(2,3,t.name)," ",e.bMT(3,5,t.quantity)," ",e.bMT(4,7,t.unit)," ")}}function d(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",4)(1,"div",5),e.nrm(2,"img",6),e.j41(3,"div",7)(4,"h1",8),e.EFF(5),e.k0s(),e.j41(6,"div",9)(7,"span")(8,"b"),e.EFF(9,"Ready in:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"span")(12,"b"),e.EFF(13,"Difficulty:"),e.k0s(),e.EFF(14),e.k0s()(),e.j41(15,"button",10),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleFavorite())}),e.EFF(16),e.k0s()()(),e.j41(17,"div",11)(18,"div",12)(19,"h2",13),e.EFF(20,"Ingredients"),e.k0s(),e.j41(21,"ul",14),e.DNE(22,o,5,9,"li",15),e.k0s()(),e.j41(23,"div",16)(24,"h2",17),e.EFF(25,"Instructions"),e.k0s(),e.nrm(26,"div",18),e.k0s()()()}if(2&n){const t=a.ngIf;e.R7$(2),e.Y8G("src",t.imageUrl,e.B4B)("alt",t.title),e.R7$(3),e.JRh(t.title),e.R7$(5),e.SpI(" ",t.readyInMinutes," mins"),e.R7$(4),e.SpI(" ",t.difficulty,""),e.R7$(),e.AVh("btn-success",!t.favorite)("btn-danger",t.favorite),e.R7$(),e.JRh(t.favorite?"Remove from Favorites":"Add to Favorites"),e.R7$(6),e.Y8G("ngForOf",t.ingredients),e.R7$(4),e.Y8G("innerHTML",t.instructions,e.npT)}}let _=(()=>{class n{route;recipeService;recipeSignal;recipe=(0,e.EWP)(()=>this.recipeSignal());loading=(0,e.EWP)(()=>null===this.recipe());error=(0,e.EWP)(()=>void 0===this.recipe()?"Error loading recipe details. Please try again.":"");subscription=new u.yU;constructor(t,c){this.route=t,this.recipeService=c;const l=this.route.snapshot.paramMap.get("id")??"";this.recipeSignal=(0,f.ot)(this.recipeService.getRecipeById(l),{initialValue:null})}ngOnDestroy(){this.subscription.unsubscribe()}toggleFavorite(){const t=this.recipe();t&&this.subscription.add(this.recipeService.setFavorite(t.id,!t.favorite).subscribe({error:c=>{console.error("Error toggling favorite:",c)}}))}static \u0275fac=function(c){return new(c||n)(e.rXU(m.nX),e.rXU(p.S))};static \u0275cmp=e.VBU({type:n,selectors:[["app-recipe-detail"]],decls:4,vars:3,consts:[[1,"container"],[1,"loading"],["role","alert",1,"alert","alert-danger"],["class","recipe",4,"ngIf"],[1,"recipe"],[1,"recipe__header"],[1,"recipe__header__image",3,"src","alt"],[1,"recipe__title-section"],[1,"recipe__title-section__title"],[1,"recipe__title-section__extra-info"],["type","button",1,"btn","btn-success",3,"click"],[1,"recipe-content"],[1,"recipe-content__ingredients"],[1,"recipe-content__ingredients__title"],[1,"recipe-content__ingredients__list"],["class","recipe-content__ingredients__chip",4,"ngFor","ngForOf"],[1,"recipe-content__instructions"],[1,"recipe-content__instructions__title"],[1,"recipe-content__instructions__steps",3,"innerHTML"],[1,"recipe-content__ingredients__chip"]],template:function(c,l){1&c&&(e.j41(0,"div",0),e.DNE(1,M,2,0,"div",1)(2,i,2,1,"div",2)(3,d,27,12,"div",3),e.k0s()),2&c&&(e.R7$(),e.vxM(l.loading()?1:-1),e.R7$(),e.vxM(l.error()?2:-1),e.R7$(),e.Y8G("ngIf",l.recipe()))},dependencies:[s.MD,s.Sq,s.bT,s.PV,E.iI],styles:[".loading[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}.recipe[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.recipe__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;padding:20px;background-color:#e3f2fd}.recipe__header__image[_ngcontent-%COMP%]{height:15.6rem;width:20rem;object-fit:cover;border-radius:8px}.recipe__title-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.recipe__title-section__title[_ngcontent-%COMP%]{font-size:2.25rem;color:#333;margin:0 0 20px}.recipe__title-section__extra-info[_ngcontent-%COMP%]{display:flex;gap:20px;color:#666;margin-bottom:20px}.recipe-content[_ngcontent-%COMP%]{padding:20px}.recipe-content__ingredients[_ngcontent-%COMP%]{margin-bottom:20px}.recipe-content__ingredients__title[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:20px}.recipe-content__ingredients__list[_ngcontent-%COMP%]{list-style:none;padding:0;display:flex;flex-wrap:wrap;justify-content:flex-start;gap:15px}.recipe-content__ingredients__chip[_ngcontent-%COMP%]{width:fit-content;padding:5px 10px;font-size:.875rem;font-weight:500;background-color:#f8f9fa;border-radius:16px;border:1px solid #ccc}.recipe-content__instructions__title[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:20px}.recipe-content__instructions__steps[_ngcontent-%COMP%]{font-size:1rem;color:#444;line-height:1.5}@media (max-width: 768px){.recipe__header[_ngcontent-%COMP%]{flex-direction:column}.recipe__header__image[_ngcontent-%COMP%]{width:100%;height:15.6rem}}"]})}return n})()},4964:(h,g,r)=>{r.d(g,{S:()=>m});var e=r(3290),s=r(8455),E=r(7673),f=r(6354),u=r(1360);let m=(()=>{class p{firestore;COLLECTION_NAME="recipes";constructor(i){this.firestore=i}getAllRecipes(){const i=(0,e.rJ)(this.firestore,this.COLLECTION_NAME);return(0,e.xs)(i,{idField:"id"})}getFavoriteRecipes(){const i=(0,e.rJ)(this.firestore,this.COLLECTION_NAME),o=(0,e.P)(i,(0,e._M)("favorite","==",!0));return(0,e.xs)(o,{idField:"id"})}getRecipeById(i){const o=(0,e.H9)(this.firestore,this.COLLECTION_NAME,i);return(0,e.Bg)(o,{idField:"id"})}setFavorite(i,o){const d=(0,e.H9)(this.firestore,this.COLLECTION_NAME,i);return(0,s.H)((0,e.mZ)(d,{favorite:o}))}searchRecipes(i){if(!i||0===i.length)return(0,E.of)([]);const o=(0,e.rJ)(this.firestore,this.COLLECTION_NAME),_=i.map(n=>n.toLowerCase()).map(n=>(0,e.P)(o,(0,e._M)("keywords","array-contains",n)));return(0,s.H)(Promise.all(_.map(n=>(0,e.GG)(n)))).pipe((0,f.T)(n=>{const a=new Map;return n.forEach(t=>{t.docs.forEach(c=>{a.has(c.id)||a.set(c.id,{id:c.id,...c.data()})})}),Array.from(a.values())}))}addRecipe(i){const o=[...i.title.split(" ").map(_=>_.toLowerCase()),...i.ingredients.map(_=>_.name.toLowerCase())];i.keywords=o;const d=(0,e.rJ)(this.firestore,this.COLLECTION_NAME);return(0,s.H)((0,e.gS)(d,i)).pipe((0,f.T)(_=>_.id))}deleteRecipe(i){const o=(0,e.H9)(this.firestore,this.COLLECTION_NAME,i);return(0,s.H)((0,e.kd)(o))}static \u0275fac=function(o){return new(o||p)(u.KVO(e._7))};static \u0275prov=u.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);