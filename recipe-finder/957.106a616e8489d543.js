"use strict";(self.webpackChunkrecipe_finder=self.webpackChunkrecipe_finder||[]).push([[957],{957:(m,v,r)=>{r.r(v),r.d(v,{FavoritesComponent:()=>c});var e=r(1360),p=r(8434),E=r(33),u=r(7364),C=r(9079),O=r(4964);const _=()=>[],h=(i,a)=>a.id;function t(i,a){1&i&&(e.j41(0,"div",2)(1,"p"),e.EFF(2,"You haven't saved any favorite recipes yet."),e.k0s(),e.j41(3,"button",5),e.EFF(4,"Search Recipes"),e.k0s()())}function o(i,a){1&i&&(e.j41(0,"div",3),e.EFF(1," Loading recipe details... "),e.k0s())}function d(i,a){if(1&i){const n=e.RV6();e.j41(0,"div",6)(1,"app-recipe-card",7),e.bIt("reloadRecipes",function(){e.eBV(n);const f=e.XpG(2);return e.Njj(f.loadFavoriteRecipes())}),e.k0s()()}if(2&i){const n=a.$implicit;e.R7$(),e.Y8G("recipe",n)}}function s(i,a){if(1&i&&(e.j41(0,"div",4),e.Z7z(1,d,2,1,"div",6,h),e.k0s()),2&i){const n=e.XpG();e.R7$(),e.Dyx(n.recipes())}}let c=(()=>{class i{recipeService;injector;recipes=(0,e.vPA)(null);loading=(0,e.EWP)(()=>null===this.recipes());constructor(n,l){this.recipeService=n,this.injector=l,this.loadFavoriteRecipes()}loadFavoriteRecipes(){this.recipes=(0,C.ot)(this.recipeService.getFavoriteRecipes(),{initialValue:null,injector:this.injector})}static \u0275fac=function(l){return new(l||i)(e.rXU(O.S),e.rXU(e.zZn))};static \u0275cmp=e.VBU({type:i,selectors:[["app-favorites"]],decls:6,vars:4,consts:[[1,"container"],[1,"text-center","pb-4"],[1,"no-favorites"],[1,"loading"],[1,"row"],["routerLink","/","type","button",1,"btn","btn-success"],[1,"col","col-sm-1","col-md-2","col-lg-4","col-xl-4","mb-4"],[3,"reloadRecipes","recipe"]],template:function(l,f){if(1&l&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"My Favorite Recipes"),e.k0s(),e.DNE(3,t,5,0,"div",2)(4,o,2,0,"div",3)(5,s,3,0,"div",4),e.k0s()),2&l){let R,M;e.R7$(3),e.vxM(null!==f.recipes()&&0===(null==(R=f.recipes())?null:R.length)?3:-1),e.R7$(),e.vxM(f.loading()?4:-1),e.R7$(),e.vxM((null!==(M=f.recipes())&&void 0!==M?M:e.lJ4(3,_)).length>0?5:-1)}},dependencies:[p.MD,E.iI,E.Wk,u.S],styles:[".no-favorites[_ngcontent-%COMP%]{text-align:center;padding:40px;background:#f8f9fa;border-radius:8px;margin-top:20px}.no-favorites[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}"]})}return i})()},4964:(m,v,r)=>{r.d(v,{S:()=>O});var e=r(3290),p=r(8455),E=r(7673),u=r(6354),C=r(1360);let O=(()=>{class _{firestore;COLLECTION_NAME="recipes";constructor(t){this.firestore=t}getAllRecipes(){const t=(0,e.rJ)(this.firestore,this.COLLECTION_NAME);return(0,e.xs)(t,{idField:"id"})}getFavoriteRecipes(){const t=(0,e.rJ)(this.firestore,this.COLLECTION_NAME),o=(0,e.P)(t,(0,e._M)("favorite","==",!0));return(0,e.xs)(o,{idField:"id"})}getRecipeById(t){const o=(0,e.H9)(this.firestore,this.COLLECTION_NAME,t);return(0,e.Bg)(o,{idField:"id"})}setFavorite(t,o){const d=(0,e.H9)(this.firestore,this.COLLECTION_NAME,t);return(0,p.H)((0,e.mZ)(d,{favorite:o}))}searchRecipes(t){if(!t||0===t.length)return(0,E.of)([]);const o=(0,e.rJ)(this.firestore,this.COLLECTION_NAME),s=t.map(c=>c.toLowerCase()).map(c=>(0,e.P)(o,(0,e._M)("keywords","array-contains",c)));return(0,p.H)(Promise.all(s.map(c=>(0,e.GG)(c)))).pipe((0,u.T)(c=>{const i=new Map;return c.forEach(a=>{a.docs.forEach(n=>{i.has(n.id)||i.set(n.id,{id:n.id,...n.data()})})}),Array.from(i.values())}))}addRecipe(t){const o=[...t.title.split(" ").map(s=>s.toLowerCase()),...t.ingredients.map(s=>s.name.toLowerCase())];t.keywords=o;const d=(0,e.rJ)(this.firestore,this.COLLECTION_NAME);return(0,p.H)((0,e.gS)(d,t)).pipe((0,u.T)(s=>s.id))}deleteRecipe(t){const o=(0,e.H9)(this.firestore,this.COLLECTION_NAME,t);return(0,p.H)((0,e.kd)(o))}static \u0275fac=function(o){return new(o||_)(C.KVO(e._7))};static \u0275prov=C.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);